<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home Equity Calculator - Bitcoin Power Law Observatory</title>
  <meta name="description" content="Explore using a home equity loan to buy Bitcoin. See projected returns under power law price scenarios.">
  <link rel="stylesheet" href="../css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="header">
    <div class="container">
      <a href="../index.html" class="logo">
        <span class="logo-icon">&#x20BF;</span>
        Power Law Observatory
      </a>
      <nav class="nav" aria-label="Main navigation">
        <a href="../index.html">Dashboard</a>
        <a href="history.html">History</a>
        <a href="future.html">Future</a>
        <a href="dca.html">DCA</a>
        <a href="equity.html" class="active">Equity</a>
        <a href="retirement.html">Retirement</a>
        <a href="about.html">About</a>
      </nav>
      <div class="lang-toggle">
        <a href="equity.html" class="lang-link active">EN</a>
        <span class="lang-sep">|</span>
        <a href="../nl/pages/equity.html" class="lang-link">NL</a>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <section class="hero">
        <h1>Home Equity Bitcoin Calculator</h1>
        <p>What if you used a home equity loan to buy Bitcoin? Explore the projected outcome under different power law scenarios. See when your Bitcoin could break even against the loan cost.</p>
      </section>

      <div class="disclaimer">
        <p><strong>Important:</strong> This is an educational tool based on power law models, not financial advice. Using home equity to buy Bitcoin carries significant risk. The model assumes the power law continues to hold. Real outcomes will vary. Always do your own research and consult a financial adviser.</p>
      </div>

      <!-- ── Input Section ──────────────────────────────── -->
      <div class="card" id="eq-input-section">

        <!-- Loan Parameters -->
        <h3>Loan Parameters</h3>
        <div class="input-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: var(--spacing-md);">
          <div class="input-group">
            <label for="eq-loan-amount">Loan Amount (<span id="eq-currency-label">$</span>)</label>
            <input type="number" id="eq-loan-amount" value="50000" min="1000" step="1000">
          </div>
          <div class="input-group">
            <label for="eq-currency">Currency</label>
            <select id="eq-currency">
              <option value="USD" selected>USD ($)</option>
              <option value="EUR">EUR (&euro;)</option>
            </select>
          </div>
          <div class="input-group">
            <label for="eq-duration">Loan Duration (years)</label>
            <input type="number" id="eq-duration" value="10" min="1" max="30">
          </div>
          <div class="input-group">
            <label for="eq-interest-rate">Interest Rate: <strong><span id="eq-interest-value">4.5</span>%</strong></label>
            <input type="range" id="eq-interest-rate" min="3" max="6" step="0.1" value="4.5">
          </div>
          <div class="input-group" style="display: flex; align-items: center; gap: 0.5rem; padding-top: 1.6rem;">
            <input type="checkbox" id="eq-interest-only">
            <label for="eq-interest-only" id="eq-interest-only-label" style="cursor: pointer;">Interest-only (aflossingsvrij)</label>
          </div>
        </div>

        <!-- Home Equity Context -->
        <div style="margin-top: var(--spacing-xl); padding-top: var(--spacing-lg); border-top: 1px solid var(--gray-border);">
          <h3>Home &amp; Mortgage</h3>
          <div class="input-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: var(--spacing-md);">
            <div class="input-group">
              <label for="eq-home-value">Home Value (<span id="eq-currency-label2">$</span>)</label>
              <input type="number" id="eq-home-value" value="500000" min="0" step="10000">
            </div>
            <div class="input-group">
              <label for="eq-mortgage-balance">Current Mortgage Balance (<span id="eq-currency-label3">$</span>)</label>
              <input type="number" id="eq-mortgage-balance" value="300000" min="0" step="10000">
            </div>
            <div class="input-group">
              <label for="eq-mortgage-rate">Mortgage Rate: <strong><span id="eq-mortgage-rate-value">3.5</span>%</strong></label>
              <input type="range" id="eq-mortgage-rate" min="1" max="6" step="0.1" value="3.5">
            </div>
          </div>

          <!-- Auto-calculated equity display -->
          <div style="display: flex; gap: var(--spacing-xl); flex-wrap: wrap; margin: var(--spacing-md) 0; padding: var(--spacing-md); background: var(--gray-light); border-radius: var(--border-radius);">
            <div>
              <div style="font-size: 0.75rem; color: var(--gray); text-transform: uppercase; letter-spacing: 0.04em;">Home Equity</div>
              <div style="font-size: 1.25rem; font-weight: 600;" id="eq-home-equity">--</div>
            </div>
            <div>
              <div style="font-size: 0.75rem; color: var(--gray); text-transform: uppercase; letter-spacing: 0.04em;">Existing LTV</div>
              <div style="font-size: 1.25rem; font-weight: 600;" id="eq-existing-ltv">--</div>
            </div>
            <div>
              <div style="font-size: 0.75rem; color: var(--gray); text-transform: uppercase; letter-spacing: 0.04em;">Total LTV (with new loan)</div>
              <div style="font-size: 1.25rem; font-weight: 600;" id="eq-total-ltv">--</div>
            </div>
          </div>
          <div id="eq-ltv-warning" class="hidden" style="color: var(--red); font-size: 0.875rem; font-weight: 500; margin-bottom: var(--spacing-sm);">
            &#9888; Total LTV exceeds 80%. Lenders typically require mortgage insurance or may decline the loan.
          </div>
        </div>

        <!-- Bitcoin Purchase Timing -->
        <div style="margin-top: var(--spacing-xl); padding-top: var(--spacing-lg); border-top: 1px solid var(--gray-border);">
          <h3>Bitcoin Purchase</h3>
          <div class="input-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: var(--spacing-md);">
            <div class="input-group">
              <label for="eq-buy-timing">When to Buy</label>
              <select id="eq-buy-timing">
                <option value="now" selected>Buy now at current price</option>
                <option value="future">Future purchase (estimate)</option>
              </select>
            </div>
            <div class="input-group">
              <label>Current BTC Price</label>
              <div id="eq-live-price" style="font-size: 1.1rem; font-weight: 600; padding-top: 0.3rem;">Loading...</div>
            </div>
          </div>

          <!-- Future date picker (hidden by default) -->
          <div id="eq-future-date-section" class="hidden" style="margin-top: var(--spacing-md);">
            <div class="input-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: var(--spacing-md);">
              <div class="input-group">
                <label for="eq-future-year">Purchase Year</label>
                <input type="number" id="eq-future-year" value="2026" min="2025" max="2040">
              </div>
              <div class="input-group">
                <label for="eq-future-month">Purchase Month</label>
                <select id="eq-future-month">
                  <option value="1">January</option>
                  <option value="2">February</option>
                  <option value="3">March</option>
                  <option value="4">April</option>
                  <option value="5">May</option>
                  <option value="6" selected>June</option>
                  <option value="7">July</option>
                  <option value="8">August</option>
                  <option value="9">September</option>
                  <option value="10">October</option>
                  <option value="11">November</option>
                  <option value="12">December</option>
                </select>
              </div>
              <div class="input-group">
                <label>Projected BTC Price</label>
                <div id="eq-future-price" style="font-size: 1.1rem; font-weight: 600; padding-top: 0.3rem;">--</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Scenario -->
        <div style="margin-top: var(--spacing-xl); padding-top: var(--spacing-lg); border-top: 1px solid var(--gray-border);">
          <h3>Price Scenario</h3>
          <div class="input-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-md);">
            <div class="input-group">
              <label for="eq-scenario">Scenario</label>
              <select id="eq-scenario">
                <option value="cyclical" selected>Cyclical (&plusmn;1&sigma;, lengthening periods)</option>
                <option value="cyclical_bear">Bear Bias Cycles (60% below trend)</option>
                <option value="smooth_trend">Smooth Trend (stays on trend)</option>
                <option value="smooth_bear">Bear (flat &minus;1&sigma; below trend)</option>
                <option value="smooth_deep_bear">Deep Bear (flat &minus;2&sigma; below trend)</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Buttons -->
        <div style="margin-top: var(--spacing-xl); display: flex; gap: var(--spacing-sm); flex-wrap: wrap;">
          <button class="calculate-btn" id="eq-calculate-btn">Calculate</button>
          <button class="calculate-btn secondary" id="eq-compare-btn">Compare All Scenarios</button>
        </div>

        <div class="hidden" id="eq-action-buttons" style="margin-top: var(--spacing-sm); display: flex; gap: var(--spacing-sm); flex-wrap: wrap;">
          <button class="calculate-btn secondary" id="eq-export-pdf-btn">&#128196; Save as PDF</button>
          <button class="calculate-btn secondary" id="eq-reset-btn">&#8634; Reset Defaults</button>
        </div>

        <!-- Status Banner -->
        <div id="eq-status-banner" class="status-banner hidden" style="margin-top: var(--spacing-lg);">
          <div id="eq-status-icon" style="font-size: 1.5rem;"></div>
          <div>
            <div id="eq-status-headline" style="font-weight: 700;"></div>
            <div id="eq-status-detail" style="font-size: 0.875rem; color: var(--gray);"></div>
          </div>
        </div>
      </div>

      <!-- ── Summary Cards ──────────────────────────────── -->
      <section id="eq-results-section" class="hidden">
        <h2>Equity Loan Summary</h2>
        <div class="dashboard" id="eq-summary-cards"></div>
      </section>

      <!-- ── Value Chart ────────────────────────────────── -->
      <section id="eq-chart-section" class="hidden">
        <h2>Bitcoin Value vs Loan Cost</h2>
        <p style="color: var(--gray); margin-bottom: var(--spacing-md);">The green line is your Bitcoin's projected value. The orange line is your cumulative loan cost. Where green crosses above orange is your break-even point.</p>
        <div class="chart-container" style="position: relative; height: 420px;">
          <canvas id="eq-value-chart" aria-label="Bitcoin value versus loan cost over time" role="img"></canvas>
        </div>
      </section>

      <!-- ── Year-by-Year Table ─────────────────────────── -->
      <section id="eq-table-section" class="hidden">
        <h2>Year-by-Year Breakdown</h2>
        <div class="table-container">
          <div style="max-height: 500px; overflow-y: auto;">
            <table>
              <thead>
                <tr>
                  <th>Year</th>
                  <th>BTC Price</th>
                  <th>BTC Value</th>
                  <th>Annual Cost</th>
                  <th>Cumulative Cost</th>
                  <th>Loan Balance</th>
                  <th>Net Position</th>
                  <th>LTV</th>
                  <th>ROI</th>
                </tr>
              </thead>
              <tbody id="eq-yearly-table-body"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- ── Scenario Comparison ────────────────────────── -->
      <section id="eq-comparison-section" class="hidden">
        <h2>Scenario Comparison</h2>
        <p style="color: var(--gray); margin-bottom: var(--spacing-md);">How the equity loan performs under each price scenario.</p>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Scenario</th>
                <th>Final BTC Value</th>
                <th>Total Cost</th>
                <th>Net Gain/Loss</th>
                <th>ROI</th>
                <th>Break-Even</th>
              </tr>
            </thead>
            <tbody id="eq-comparison-body"></tbody>
          </table>
        </div>
      </section>

      <!-- ── Insight ────────────────────────────────────── -->
      <section id="eq-insight-section" class="hidden">
        <div class="info-box">
          <h4>Key Insight</h4>
          <p id="eq-insight-text"></p>
        </div>
      </section>

    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>Data Sources</h4>
          <p>Historical: Bitstamp, CryptoDataDownload<br>Live: CoinGecko API</p>
        </div>
        <div class="footer-section">
          <h4>Model</h4>
          <p>Santostasi/Perrenod Power Law Theory<br>Parameters from <a href="https://bitcoinpower.law" style="color: var(--orange);">bitcoinpower.law</a></p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>This is not financial advice. Using home equity to invest in Bitcoin carries significant risk. Historical model fit does not guarantee future performance.</p>
      </div>
    </div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.2/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <script src="../js/powerlaw.js"></script>
  <script src="../js/retirement.js"></script>
  <script src="../js/equity.js"></script>
  <script src="../js/equity-ui.js"></script>
</body>
</html>
