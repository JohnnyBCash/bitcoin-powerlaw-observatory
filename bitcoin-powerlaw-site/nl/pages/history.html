<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Historische Analyse - Bitcoin Machtswet Observatorium</title>
  <meta name="description" content="Verken Bitcoin's historische prijsdata via log-log grafieken en terugkeer-naar-gemiddelde analyse.">
  <link rel="stylesheet" href="../../css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <header class="header">
    <div class="container">
      <a href="../index.html" class="logo">
        <span class="logo-icon">&#x20BF;</span>
        Machtswet Observatorium
      </a>
      <nav class="nav" aria-label="Hoofdnavigatie">
        <a href="../index.html">Dashboard</a>
        <a href="history.html" class="active">Geschiedenis</a>
        <a href="future.html">Toekomst</a>
        <a href="dca.html">DCA</a>
        <a href="retirement.html">Pensioen</a>
        <a href="about.html">Over</a>
      </nav>
      <div class="lang-toggle">
        <a href="../../pages/history.html" class="lang-link">EN</a>
        <span class="lang-sep">|</span>
        <a href="history.html" class="lang-link active">NL</a>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <section class="hero">
        <h1>Historische Analyse</h1>
        <p>Bitcoin's prijsgeschiedenis uitgezet op een log-log schaal onthult een opmerkelijk consistente machtswetrelatie. Afwijkingen van de trend zijn dramatisch maar statistisch gewoon.</p>
      </section>

      <!-- As-schaaltoggles + band-selectievakjes -->
      <div class="scale-toggles">
        <div class="scale-group">
          <span class="scale-group-label">Tijd</span>
          <div class="pill-group" role="group" aria-label="Tijdas schaal">
            <button class="pill-btn" data-axis="x" data-scale="linear">Lineair</button>
            <button class="pill-btn active" data-axis="x" data-scale="logarithmic">Log</button>
          </div>
        </div>

        <div class="scale-group">
          <span class="scale-group-label">Prijs</span>
          <div class="pill-group" role="group" aria-label="Prijsas schaal">
            <button class="pill-btn" data-axis="y" data-scale="linear">Lineair</button>
            <button class="pill-btn active" data-axis="y" data-scale="logarithmic">Log</button>
          </div>
        </div>

        <div class="scale-group" style="gap: 1rem;">
          <label style="display: flex; align-items: center; gap: 0.4rem; cursor: pointer; font-size: 0.875rem; color: var(--gray); font-weight: 500;">
            <input type="checkbox" id="show-trend" checked> Trend
          </label>
          <label style="display: flex; align-items: center; gap: 0.4rem; cursor: pointer; font-size: 0.875rem; color: var(--gray); font-weight: 500;">
            <input type="checkbox" id="show-1sigma" checked> &plusmn;1&sigma;
          </label>
          <label style="display: flex; align-items: center; gap: 0.4rem; cursor: pointer; font-size: 0.875rem; color: var(--gray); font-weight: 500;">
            <input type="checkbox" id="show-2sigma" checked> &plusmn;2&sigma;
          </label>
        </div>
      </div>

      <!-- Hoofdgrafiek -->
      <div class="chart-container" style="height: 520px;">
        <canvas id="history-chart" aria-label="Bitcoin historische prijsgrafiek met machtswettrend" role="img"></canvas>
      </div>

      <!-- Statistieken onder grafiek -->
      <div class="stats-row" id="stats-row">
        <div class="stat-item">
          <div class="stat-label">Laatste Prijs</div>
          <div class="stat-value" id="stat-latest">--</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Hoogste Ooit</div>
          <div class="stat-value" id="stat-ath">--</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">ATH Datum</div>
          <div class="stat-value" id="stat-ath-date" style="font-size: 0.95rem;">--</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Laagste Ooit</div>
          <div class="stat-value" id="stat-atl">--</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">ATL Datum</div>
          <div class="stat-value" id="stat-atl-date" style="font-size: 0.95rem;">--</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Datapunten</div>
          <div class="stat-value" id="stat-points">--</div>
        </div>
      </div>

      <!-- Zoom bediening + Export -->
      <div class="chart-controls">
        <div class="zoom-group" role="group" aria-label="Grafiek tijdsbereik">
          <button class="zoom-btn" data-range="1w">1W</button>
          <button class="zoom-btn" data-range="1m">1M</button>
          <button class="zoom-btn" data-range="6m">6M</button>
          <button class="zoom-btn" data-range="1y">1J</button>
          <button class="zoom-btn" data-range="5y">5J</button>
          <button class="zoom-btn active" data-range="all">Alles</button>
        </div>
        <button id="export-csv" class="toggle-btn" style="font-size: 0.8rem; padding: 0.4rem 1rem;">CSV â†“</button>
      </div>

      <!-- Grafiek uitleg -->
      <div class="info-box" style="margin-top: var(--spacing-xl);">
        <h4>Hoe lees je deze grafiek</h4>
        <p><strong>Lineair + Lineair</strong> toont de explosieve recente groei in ruwe dollars &mdash; vroege jaren zijn afgeplat nabij nul.<br>
           <strong>Lineair + Log (prijs)</strong> spreidt de vroege geschiedenis uit zodat je elke cyclus duidelijk ziet.<br>
           <strong>Log + Log</strong> is de klassieke machtswetweergave: als BTC een machtswet volgt, wordt de trend een rechte lijn.<br>
           <strong>Log tijd + Lineaire prijs</strong> comprimeert de vroege stille jaren terwijl dollarbewegingen intu&iuml;tief blijven.</p>
        <p style="margin-top: var(--spacing-sm);"><strong>Trend</strong> is de machtswet eerlijke-waarde curve. De <strong>&sigma; banden</strong> tonen &eacute;&eacute;n en twee standaardafwijkingen boven en onder &mdash; historisch is de prijs altijd teruggekeerd binnen deze grenzen.</p>
      </div>

      <!-- Uitleg Terugkeer naar Gemiddelde -->
      <div class="info-box" style="margin-top: var(--spacing-lg);">
        <h4>Terugkeer naar het Gemiddelde Begrijpen</h4>
        <p>Beschouw de machtswettrend als een elastiek. De prijs kan ver boven of onder de trend uitrekken, maar schiet altijd terug. Dit is geen magie; het is statistiek. Extreme afwijkingen zijn per definitie onhoudbaar.</p>
      </div>

      <!-- Prijsverdeling Sectie -->
      <section id="bell-curve-section" style="margin-top: var(--spacing-xxl);">
        <h2>Prijsverdeling: Hoe Vaak is Bitcoin Zo Goedkoop?</h2>
        <p style="color: var(--gray); margin-bottom: var(--spacing-lg);">Gebaseerd op <strong>5.674 dagelijkse slotkoersen</strong> sinds juli 2010. Elke balk toont hoeveel dagen per jaar Bitcoin doorgaans handelt tegen die veelvoud van de machtswettrend. De positie van vandaag gebruikt de live prijs. Ge&iuml;nspireerd door <a href="https://x.com/therealplanc" style="color: var(--orange);">PlanC's kwantielanalyse</a>.</p>

        <div class="chart-container" style="height: 400px;">
          <canvas id="bell-curve-chart" aria-label="Verdelingsgrafiek die laat zien hoeveel tijd Bitcoin op elk prijsniveau heeft doorgebracht ten opzichte van de machtswettrend" role="img"></canvas>
        </div>

        <!-- Verdelingsstatistieken -->
        <div class="dashboard" style="margin-top: var(--spacing-lg);">
          <div class="card">
            <div class="card-label">Vandaag vs Trend</div>
            <div class="card-value" id="today-pct-from-trend" style="font-size: 1.5rem;">--</div>
            <div class="card-sub" id="today-valuation-label">--</div>
          </div>

          <div class="card">
            <div class="card-label">Historisch Percentiel</div>
            <div class="card-value" id="today-percentile-value" style="font-size: 1.5rem;">--</div>
            <div class="card-sub">Goedkoper dan <span id="pct-cheaper">--</span>% van de hele geschiedenis</div>
          </div>

          <div class="card">
            <div class="card-label">Typisch Bereik (&plusmn;1&sigma;)</div>
            <div class="card-value" id="typical-range-pct" style="font-size: 1.3rem;">--</div>
            <div class="card-sub">De prijs brengt het meeste tijd door in deze band</div>
          </div>
        </div>

        <!-- Educatieve Tekst -->
        <div class="info-box" style="margin-top: var(--spacing-lg);">
          <h4>Deze Grafiek Lezen</h4>
          <p>Elke balk toont hoeveel van Bitcoin's geschiedenis werd doorgebracht op dat prijsniveau ten opzichte van de machtswettrend. De <strong style="color: #00C853;">groene zone</strong> aan de linkerkant markeert perioden waarin Bitcoin aanzienlijk goedkoper was dan de trend &mdash; historisch gezien geweldige koopmogelijkheden. De <strong style="color: #FF1744;">rode zone</strong> aan de rechterkant markeert perioden waarin Bitcoin aanzienlijk duurder was dan de trend &mdash; de prijzen kwamen altijd terug van deze niveaus. De oranje lijn toont waar we vandaag staan.</p>
        </div>
      </section>

      <!-- Wekelijkse Historische Tabel -->
      <section class="weekly-table-section" id="weekly-history-section">
        <h2>Wekelijkse Historische Data</h2>
        <p style="color: var(--gray); margin-bottom: var(--spacing-md);">
          Je primaire controle: bekijk de slotkoers, trendwaarde en afwijking van elke week.
          Gebruik dit om de huidige positie in historische context te beoordelen.
        </p>

        <!-- Log Afwijking Uitleg -->
        <div class="info-box" style="margin-bottom: var(--spacing-lg);">
          <h4>Log Afwijking Begrijpen</h4>
          <p style="margin-bottom: var(--spacing-sm);">
            <strong>Log afwijking = log&#x2081;&#x2080;(prijs &divide; trend)</strong>. Het meet de afstand tot eerlijke waarde op een logaritmische schaal,
            wat Bitcoin's exponenti&euml;le aard beter weergeeft.
          </p>
          <table style="width: 100%; font-size: 0.875rem; margin-top: var(--spacing-sm);">
            <thead>
              <tr>
                <th style="text-align: left; padding: 6px;">Log Afw</th>
                <th style="text-align: left; padding: 6px;">Betekenis</th>
                <th style="text-align: left; padding: 6px;">Veelvoud</th>
                <th style="text-align: left; padding: 6px;">Actiesignaal</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="padding: 6px; color: var(--green); font-weight: 600;">&minus;0,30</td>
                <td style="padding: 6px;">50% onder trend</td>
                <td style="padding: 6px;">0,50&times;</td>
                <td style="padding: 6px;"><span class="log-dev-label extreme-under">Leen fiat / Sterk kopen</span></td>
              </tr>
              <tr>
                <td style="padding: 6px; color: var(--green);">&minus;0,15</td>
                <td style="padding: 6px;">~30% onder trend</td>
                <td style="padding: 6px;">0,71&times;</td>
                <td style="padding: 6px;"><span class="log-dev-label under">Accumuleren</span></td>
              </tr>
              <tr>
                <td style="padding: 6px; color: var(--gray);">0,00</td>
                <td style="padding: 6px;">Eerlijke waarde (op trend)</td>
                <td style="padding: 6px;">1,00&times;</td>
                <td style="padding: 6px;"><span class="log-dev-label fair">Houden</span></td>
              </tr>
              <tr>
                <td style="padding: 6px; color: var(--red);">+0,30</td>
                <td style="padding: 6px;">~100% boven trend</td>
                <td style="padding: 6px;">2,00&times;</td>
                <td style="padding: 6px;"><span class="log-dev-label over">Winst nemen</span></td>
              </tr>
              <tr>
                <td style="padding: 6px; color: var(--red); font-weight: 600;">+0,60</td>
                <td style="padding: 6px;">~300% boven trend</td>
                <td style="padding: 6px;">4,00&times;</td>
                <td style="padding: 6px;"><span class="log-dev-label extreme-over">Verkopen / Zeepbelzone</span></td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Tabelcontainer (gevuld door weekly-table.js) -->
        <div id="weekly-table-container">
          <p style="color: var(--gray);">Wekelijkse data laden...</p>
        </div>
      </section>

      <!-- Historische Voorbeelden -->
      <h2 style="margin-top: var(--spacing-xl);">Opmerkelijke Afwijkingen</h2>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Gebeurtenis</th>
              <th>Datum</th>
              <th>Piekvermenigvuldiger</th>
              <th>Daaropvolgende Daling</th>
              <th>Tijd tot Trend</th>
            </tr>
          </thead>
          <tbody id="deviations-table">
            <tr>
              <td>2011 Zeepbel</td>
              <td>Jun 2011</td>
              <td>~8&times; boven trend</td>
              <td>-94%</td>
              <td>~2 jaar</td>
            </tr>
            <tr>
              <td>2013 Dubbele Top</td>
              <td>Dec 2013</td>
              <td>~4&times; boven trend</td>
              <td>-86%</td>
              <td>~3 jaar</td>
            </tr>
            <tr>
              <td>2017 Stierenmarkt</td>
              <td>Dec 2017</td>
              <td>~4&times; boven trend</td>
              <td>-84%</td>
              <td>~3 jaar</td>
            </tr>
            <tr>
              <td>2021 Piek</td>
              <td>Nov 2021</td>
              <td>~2,5&times; boven trend</td>
              <td>-77%</td>
              <td>~2 jaar</td>
            </tr>
            <tr>
              <td>2022 Bodem</td>
              <td>Nov 2022</td>
              <td>~0,5&times; (onder)</td>
              <td>N.v.t. (bodem)</td>
              <td>Herstel begon</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Elastiek Animatie -->
      <div class="info-box" style="margin-top: var(--spacing-xl); text-align: center;">
        <h4>Het Elastiekeffect</h4>
        <div id="rubber-band-demo" style="height: 100px; position: relative; margin: var(--spacing-lg) 0;">
          <div style="position: absolute; top: 50%; left: 0; right: 0; height: 2px; background: var(--orange);"></div>
          <div id="rubber-band-ball" style="position: absolute; top: 50%; left: 50%; width: 20px; height: 20px; background: var(--black); border-radius: 50%; transform: translate(-50%, -50%); transition: top 0.5s ease-in-out;"></div>
        </div>
        <p style="margin-top: var(--spacing-sm);">De prijs rekt weg van de trend, dan trekt de zwaartekracht het terug. Elke cyclus. Zonder uitzondering (tot nu toe).</p>
        <button id="animate-rubber-band" class="toggle-btn" style="margin-top: var(--spacing-sm);">Animatie</button>
      </div>

      <!-- Statistieken -->
      <h2 style="margin-top: var(--spacing-xl);">Modelstatistieken</h2>
      <div class="dashboard">
        <div class="card">
          <div class="card-label">Huidige &sigma;</div>
          <div class="card-value" id="current-sigma">--</div>
          <div class="card-sub">Log volatiliteit uit residuen</div>
        </div>

        <div class="card">
          <div class="card-label">Max Historische Multiplicator</div>
          <div class="card-value" id="max-mult">--</div>
          <div class="card-sub" id="max-mult-date">--</div>
        </div>

        <div class="card">
          <div class="card-label">Min Historische Multiplicator</div>
          <div class="card-value" id="min-mult">--</div>
          <div class="card-sub" id="min-mult-date">--</div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>Databronnen</h4>
          <p>Historisch: Bitstamp, CryptoDataDownload<br>Gecombineerde dataset vanaf juli 2010</p>
        </div>
        <div class="footer-section">
          <h4>Model</h4>
          <p>Santostasi/Perrenod Machtswettheorie<br>Parameters van <a href="https://bitcoinpower.law" style="color: var(--orange);">bitcoinpower.law</a></p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>Dit is geen financieel advies. Historische modelpassing garandeert geen toekomstige prestaties.</p>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <script src="../../js/powerlaw.js"></script>
  <script src="../js/history.js"></script>
  <script src="../js/weekly-table.js"></script>
</body>
</html>
